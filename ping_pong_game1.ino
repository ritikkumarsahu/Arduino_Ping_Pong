////// Custom heart charactor
byte heart[8] =
{
	0b01010,
	0b11111,
	0b11111,
	0b01110,
	0b00100,
	0b00000,
	0b00000,
	0b00000
};
////////////////////////////// Player 1 Paddle Characters //////////////////////////////////

byte Apaddle1[8] = {

  0b10000,

  0b10110,

  0b10110,

  0b01010,

  0b00111,

  0b00111,

  0b00111,

  0b00000

};



byte Apaddle2[8] = {

  0b00000,

  0b10000,

  0b10110,

  0b10110,

  0b01010,

  0b00111,

  0b00111,

  0b00111

};



byte Apaddle3[8] = {

  0b00000,

  0b00000,

  0b10000,

  0b10110,

  0b10110,

  0b01010,

  0b00111,

  0b00111

};



byte Apaddle4[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b10110,

  0b10110,

  0b01010,

  0b00111

};



byte Apaddle5[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b10110,

  0b10110,

  0b01010

};



byte Apaddle6[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b10110,

  0b10110

};



byte Apaddle7a[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b10110

};



byte Apaddle7b[8] = {

  0b10110,

  0b01010,

  0b00111,

  0b00111,

  0b00111,

  0b00000,

  0b00000,

  0b00000

};



byte Apaddle8a[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000

};



byte Apaddle8b[8] = {

  0b10110,

  0b10110,

  0b01010,

  0b00111,

  0b00111,

  0b00111,

  0b00000,

  0b00000

};

////////////////////////////// Player 2 Paddle Characters //////////////////////////////////



byte Bpaddle1[8] = {

  0b00001,

  0b01101,

  0b01101,

  0b01010,

  0b11100,

  0b11100,

  0b11100,

  0b00000

};



byte Bpaddle2[8] = {

  0b00000,

  0b00001,

  0b01101,

  0b01101,

  0b01010,

  0b11100,

  0b11100,

  0b11100

};



byte Bpaddle3[8] = {

  0b00000,

  0b00000,

  0b00001,

  0b01101,

  0b01101,

  0b01010,

  0b11100,

  0b11100

};



byte Bpaddle4[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b01101,

  0b01101,

  0b01010,

  0b11100

};



byte Bpaddle5[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b01101,

  0b01101,

  0b01010

};



byte Bpaddle6[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b01101,

  0b01101

};



byte Bpaddle7a[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b01101

};



byte Bpaddle7b[8] = {

  0b01101,

  0b01010,

  0b11100,

  0b11100,

  0b11100,

  0b00000,

  0b00000,

  0b00000

};



byte Bpaddle8a[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001

};



byte Bpaddle8b[8] = {

  0b01101,

  0b01101,

  0b01010,

  0b11100,

  0b11100,

  0b11100,

  0b00000,

  0b00000

};



/////////////////////////// Ball Characters //////////////////////////////////



// Row 1, Each Column

byte ball00[8] = {

  0b10000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball01[8] = {

  0b01000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball02[8] = {

  0b00100,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball03[8] = {

  0b00010,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball04[8] = {

  0b00001,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



// Row 2, Each Column

byte ball10[8] = {

  0b00000,

  0b10000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball11[8] = {

  0b00000,

  0b01000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball12[8] = {

  0b00000,

  0b00100,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball13[8] = {

  0b00000,

  0b00010,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball14[8] = {

  0b00000,

  0b00001,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



// Row 3, Each Column

byte ball20[8] = {

  0b00000,

  0b00000,

  0b10000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball21[8] = {

  0b00000,

  0b00000,

  0b01000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball22[8] = {

  0b00000,

  0b00000,

  0b00100,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball23[8] = {

  0b00000,

  0b00000,

  0b00010,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball24[8] = {

  0b00000,

  0b00000,

  0b00001,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



// Row 4, Each Column

byte ball30[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball31[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b01000,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball32[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00100,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball33[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00010,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



byte ball34[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b00000,

  0b00000,

  0b00000,

  0b00000

};



// Row 5, Each Column

byte ball40[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b00000,

  0b00000,

  0b00000

};



byte ball41[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b01000,

  0b00000,

  0b00000,

  0b00000

};



byte ball42[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00100,

  0b00000,

  0b00000,

  0b00000

};



byte ball43[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00010,

  0b00000,

  0b00000,

  0b00000

};



byte ball44[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b00000,

  0b00000,

  0b00000

};



// Row 6, Each Column

byte ball50[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b00000,

  0b00000

};



byte ball51[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b01000,

  0b00000,

  0b00000

};



byte ball52[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00100,

  0b00000,

  0b00000

};



byte ball53[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00010,

  0b00000,

  0b00000

};



byte ball54[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b00000,

  0b00000

};



// Row 7, Each Column

byte ball60[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000,

  0b00000

};



byte ball61[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b01000,

  0b00000

};



byte ball62[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00100,

  0b00000

};



byte ball63[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00010,

  0b00000

};



byte ball64[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001,

  0b00000

};



// Row 8, Each Column

byte ball70[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b10000

};



byte ball71[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b01000

};



byte ball72[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00100

};



byte ball73[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00010

};



byte ball74[8] = {

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00000,

  0b00001

};



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



// include the library:

#include <LiquidCrystal.h>



// LCD setup

LiquidCrystal lcd(12, 11, 5, 4, 3, 2);



// Arduino I/O Pins

const int buttonUPP1 = 8;            // Player one UP button Pin

const int buttonDOWNP1 = 10;              // Player one DOWN button Pin

const int buttonUPP2 = 6;            // Player two UP button Pin

const int buttonDOWNP2 = 7;                            // Player two DOWN button Pin



// Globals Variables

int paddlePosP1 = 7;                        // Position of the player One paddle (initialized to middle pos of LCD) (14 possible positions)

int paddlePosP2 = 7;                        // Position of the player Two paddle (initialized to middle pos of LCD) (14 possible positions)

int upDownDir;                              // Up and Down Direction of the Ball

int leftRightDir;                           // Left and Right Direction of the Ball

int ballPos[2];                             // X, Y coordinates of the ball

int pointsP1;                               // Player One Score (3 is Maximum)

int pointsP2;                               // Player Two Score (3 is Maximum)

float distance;                             // Distance between successive positions of the ball in LCD

float totalDistance;                        // Total distance from the ball's last boundary deflection point, this is used to properly calculate the ball's trajectory

int angle;                                  // Angle with respect to the horizontal (X) axis where the ball is moving

float YaxisAngle;                           // Clockwise angle from the Vertical (Y) axis where the ball is moving

boolean gameState;                          // Game State



float difficultyPercent = 10;      // Speed increase percentage when the player successfully hits the ball off their paddle

int minAngle = 10;                // Min trajectory angle for the ball

int maxAngle = 50;                // Max trajectory angle for the ball

float initialDist = 1.0;              // Initial Distance value that is used at the start of a game



void setup() {

	gameState = false;

	// set up the lcd's number of columns and rows(16*2):

	lcd.begin(16, 2);



	// set buttons as input

	pinMode(buttonUPP1, INPUT);

	pinMode(buttonDOWNP1, INPUT);

	pinMode(buttonUPP2, INPUT);

	pinMode(buttonDOWNP2, INPUT);



	// calculate an initial trajectory angle for the ball

	startDir();



	// set the ball's initial position to centre screen

	ballPos[0] = 39;

	ballPos[1] = 7;



	// initialize control variables to EASY Level Style

	distance = initialDist;

	totalDistance = distance;

	pointsP1 = 0;

	pointsP2 = 0;



	// clearing the LCD display

	lcd.clear();

	Level();

}





void loop() {

	// checks the game status

	if (gameState == true)    // Game is started

	{

		Updateball();         // Updates the ball's position



		if (gameState == true) {

			playerPaddleUpdate();        // Updates the player's paddle position

		}

		delay(100);

	}



}





void Level()

{

	String difficulty = "No_Level";

	int I = 0;

	String level[3] = { "     EASY     " ,"    MEDIUM     ", "     HARD     " };

	do {

		lcd.setCursor(0, 0);

		lcd.print("ChooseDifficulty");

		lcd.setCursor(0, 1);

		if (digitalRead(buttonUPP1) == HIGH) {

			I--;

			if (I < 0) I = 0;

		}

		else if (digitalRead(buttonDOWNP1) == HIGH) {



			I++;

			if (I > 2) I = 2;

		}

		lcd.print(level[I]);

		if (digitalRead(buttonUPP2) == HIGH || digitalRead(buttonDOWNP2) == HIGH)

		{

			difficulty = level[I];

			if (difficulty == level[0]) { initialDist = 1.0; difficultyPercent = 10; }

			else if (difficulty == level[1]) { initialDist = 1.0; difficultyPercent = 30; }

			else if (difficulty == level[2]) { initialDist = 1.0; difficultyPercent = 50; }

			// Start a game (toggle game state) and Draw the game Scene

			gameState = true;

			Draw();



		}

	} while (difficulty == "No_Level");

}



// Function for drawing the game Scene

void Draw() {

	lcd.clear();



	// Draw the ball in it's center position

	lcd.createChar(2, ball04);

	lcd.setCursor(7, 1);

	lcd.write(2);

	delay(250);

}



// Function for determining the ball's propagating angle

void startDir() {

	// randomly get a 1 or -1 for the up or down and left or right directions and the ball's angle of travel from the X axis 

	upDownDir = 0;

	leftRightDir = 0;

	while (upDownDir == 0) {

		upDownDir = random(-1, 2);

	}

	while (leftRightDir == 0) {

		leftRightDir = random(-1, 2);

	}

	// Randomly grab a game angle between Min and Max values

	randomSeed(analogRead(1));

	angle = random(minAngle, maxAngle + 1);



}

//Updates the player's paddle position

void playerPaddleUpdate() {

	// read the control buttons for paddle position

	int UPbtnP1 = digitalRead(buttonUPP1);

	int DOWNbtnP1 = digitalRead(buttonDOWNP1);

	int UPbtnP2 = digitalRead(buttonUPP2);

	int DOWNbtnP2 = digitalRead(buttonDOWNP2);

	// Updating paddle position for Player 1 and Player 2 (14 possible paddle positions)

	if (UPbtnP1 == HIGH)

	{

		paddlePosP1++;

		paddlePosP1 = constrain(paddlePosP1, 1, 14);

		//clear the P1 paddle

		lcd.setCursor(15, 0);

		lcd.print(" ");

		lcd.setCursor(15, 1);

		lcd.print(" ");



	}

	if (DOWNbtnP1 == HIGH)

	{

		paddlePosP1--;

		paddlePosP1 = constrain(paddlePosP1, 1, 14);

		//clear the P1 paddle

		lcd.setCursor(15, 0);

		lcd.print(" ");

		lcd.setCursor(15, 1);

		lcd.print(" ");



	}

	if (UPbtnP2 == HIGH)

	{

		paddlePosP2++;

		paddlePosP2 = constrain(paddlePosP2, 1, 14);

		//clear the P2 paddle

		lcd.setCursor(0, 0);

		lcd.print(" ");

		lcd.setCursor(0, 1);

		lcd.print(" ");



	}

	if (DOWNbtnP2 == HIGH)

	{

		paddlePosP2--;

		paddlePosP2 = constrain(paddlePosP2, 1, 14);

		//clear the P2 paddle

		lcd.setCursor(0, 0);

		lcd.print(" ");

		lcd.setCursor(0, 1);

		lcd.print(" ");



	}



	//draw new paddle for player 1 position using the correct custom LCD characters

	if (paddlePosP1 == 1)

	{

		lcd.createChar(6, Apaddle6);

		lcd.setCursor(15, 1);

		lcd.write(6);

	}

	else if (paddlePosP1 == 2)

	{

		lcd.createChar(7, Apaddle5);

		lcd.setCursor(15, 1);

		lcd.write(7);

	}

	else if (paddlePosP1 == 3)

	{

		lcd.createChar(6, Apaddle4);

		lcd.setCursor(15, 1);

		lcd.write(6);

	}

	else if (paddlePosP1 == 4)

	{

		lcd.createChar(7, Apaddle3);

		lcd.setCursor(15, 1);

		lcd.write(7);

	}

	else if (paddlePosP1 == 5)

	{

		lcd.createChar(6, Apaddle2);

		lcd.setCursor(15, 1);

		lcd.write(6);

	}

	else if (paddlePosP1 == 6)

	{

		lcd.createChar(7, Apaddle1);

		lcd.setCursor(15, 1);

		lcd.write(7);

	}

	else if (paddlePosP1 == 7)

	{

		lcd.createChar(6, Apaddle8a);

		lcd.setCursor(15, 0);

		lcd.write(6);

		lcd.createChar(7, Apaddle8b);

		lcd.setCursor(15, 1);

		lcd.write(7);

	}

	else if (paddlePosP1 == 8)

	{

		lcd.createChar(6, Apaddle7a);

		lcd.setCursor(15, 0);

		lcd.write(6);

		lcd.createChar(7, Apaddle7b);

		lcd.setCursor(15, 1);

		lcd.write(7);

	}

	else if (paddlePosP1 == 9)

	{

		lcd.createChar(6, Apaddle6);

		lcd.setCursor(15, 0);

		lcd.write(6);

	}

	else if (paddlePosP1 == 10)

	{

		lcd.createChar(7, Apaddle5);

		lcd.setCursor(15, 0);

		lcd.write(7);

	}

	else if (paddlePosP1 == 11)

	{

		lcd.createChar(6, Apaddle4);

		lcd.setCursor(15, 0);

		lcd.write(6);

	}

	else if (paddlePosP1 == 12)

	{

		lcd.createChar(7, Apaddle3);

		lcd.setCursor(15, 0);

		lcd.write(7);

	}

	else if (paddlePosP1 == 13)

	{

		lcd.createChar(6, Apaddle2);

		lcd.setCursor(15, 0);

		lcd.write(6);

	}

	else if (paddlePosP1 == 14)

	{

		lcd.createChar(7, Apaddle1);

		lcd.setCursor(15, 0);

		lcd.write(7);

	}

	//draw new paddle position for player 2 using the correct custom LCD characters

	if (paddlePosP2 == 1)

	{

		lcd.createChar(0, Bpaddle6);

		lcd.setCursor(0, 1);

		lcd.write((uint8_t)0);

	}

	else if (paddlePosP2 == 2)

	{

		lcd.createChar(1, Bpaddle5);

		lcd.setCursor(0, 1);

		lcd.write(1);

	}

	else if (paddlePosP2 == 3)

	{

		lcd.createChar(0, Bpaddle4);

		lcd.setCursor(0, 1);

		lcd.write((uint8_t)0);

	}

	else if (paddlePosP2 == 4)

	{

		lcd.createChar(1, Bpaddle3);

		lcd.setCursor(0, 1);

		lcd.write(1);

	}

	else if (paddlePosP2 == 5)

	{

		lcd.createChar(0, Bpaddle2);

		lcd.setCursor(0, 1);

		lcd.write((uint8_t)0);

	}

	else if (paddlePosP2 == 6)

	{

		lcd.createChar(1, Bpaddle1);

		lcd.setCursor(0, 1);

		lcd.write(1);

	}

	else if (paddlePosP2 == 7)

	{

		lcd.createChar(0, Bpaddle8a);

		lcd.setCursor(0, 0);

		lcd.write((uint8_t)0);

		lcd.createChar(1, Bpaddle8b);

		lcd.setCursor(0, 1);

		lcd.write(1);

	}

	else if (paddlePosP2 == 8)

	{

		lcd.createChar(0, Bpaddle7a);

		lcd.setCursor(0, 0);

		lcd.write((uint8_t)0);

		lcd.createChar(1, Bpaddle7b);

		lcd.setCursor(0, 1);

		lcd.write(1);

	}

	else if (paddlePosP2 == 9)

	{

		lcd.createChar(0, Bpaddle6);

		lcd.setCursor(0, 0);

		lcd.write((uint8_t)0);

	}

	else if (paddlePosP2 == 10)

	{

		lcd.createChar(1, Bpaddle5);

		lcd.setCursor(0, 0);

		lcd.write(1);

	}

	else if (paddlePosP2 == 11)

	{

		lcd.createChar(0, Bpaddle4);

		lcd.setCursor(0, 0);

		lcd.write((uint8_t)0);

	}

	else if (paddlePosP2 == 12)

	{

		lcd.createChar(1, Bpaddle3);

		lcd.setCursor(0, 0);

		lcd.write(1);

	}

	else if (paddlePosP2 == 13)

	{

		lcd.createChar(0, Bpaddle2);

		lcd.setCursor(0, 0);

		lcd.write((uint8_t)0);

	}

	else if (paddlePosP2 == 14)

	{

		lcd.createChar(1, Bpaddle1);

		lcd.setCursor(0, 0);

		lcd.write(1);

	}



}



// Function for updating the ball's position on the LCD(16*2) screen using one of 40 possible custom characters

void Updateball() {
	int i;
	// Calculate the YaxisAngle of the ball's game angle (trajectory angle)

	if (upDownDir == 1 && leftRightDir == -1)

	{

		YaxisAngle = 90 - angle;

	}

	else if (upDownDir == -1 && leftRightDir == -1)

	{

		YaxisAngle = 90 + angle;

	}

	else if (upDownDir == -1 && leftRightDir == 1)

	{

		YaxisAngle = 270 - angle;

	}

	else

	{

		YaxisAngle = 270 + angle;

	}

	// Convert degrees to radians

	YaxisAngle = YaxisAngle * PI / 180.0;



	//Sin and Cos Functions draw the new pos for ball using ball's last deflection point along with total distance to better display the true game angle)

	int newX = sin(YaxisAngle) * totalDistance + (float)ballPos[0];

	int newY = cos(YaxisAngle) * totalDistance + (float)ballPos[1];

	int P = 0;            // flag variable for p1 and p2

	// Constrain the ball's position to be on the game Scene

	newX = constrain(newX, 5, 75);

	newY = constrain(newY, 0, 15);



	// Update the total distance between the ball and it's last deflection (bounce) point within the game

	totalDistance = totalDistance + distance;



	// Check if the ball has hit a top or bottom boundary

	if (newY == 0)      // Hits the Bottom

	{

		upDownDir = 1;

		totalDistance = distance;

		ballPos[0] = newX;

		ballPos[1] = newY + 1;

	}

	else if (newY == 15)  // Hits the Top

	{

		upDownDir = -1;

		totalDistance = distance;

		ballPos[0] = newX;

		ballPos[1] = newY - 1;

	}



	// Check if the ball has hit a left or right boundary and if so update it's Left/Right state value

	else if (newX == 5)  // Hit the player 1's boundary

	{

		P = -1;

		// Speed up the ball each time it hit's the player's paddle

		distance = (1.0 + difficultyPercent / 100.0) * distance;



		// Check to see if the Collision has happened of ball and paddle

		if (newY == 0 && (paddlePosP2 == 1 || paddlePosP2 == 2)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 1 && (paddlePosP2 == 1 || paddlePosP2 == 2 || paddlePosP2 == 3)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 2 && (paddlePosP2 == 1 || paddlePosP2 == 2 || paddlePosP2 == 3 || paddlePosP2 == 4)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 3 && (paddlePosP2 == 1 || paddlePosP2 == 2 || paddlePosP2 == 3 || paddlePosP2 == 4 || paddlePosP2 == 5)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 4 && (paddlePosP2 == 2 || paddlePosP2 == 3 || paddlePosP2 == 4 || paddlePosP2 == 5 || paddlePosP2 == 6)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 5 && (paddlePosP2 == 3 || paddlePosP2 == 4 || paddlePosP2 == 5 || paddlePosP2 == 6 || paddlePosP2 == 7)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 6 && (paddlePosP2 == 4 || paddlePosP2 == 5 || paddlePosP2 == 6 || paddlePosP2 == 7 || paddlePosP2 == 8)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 7 && (paddlePosP2 == 5 || paddlePosP2 == 6 || paddlePosP2 == 7 || paddlePosP2 == 8 || paddlePosP2 == 9)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 8 && (paddlePosP2 == 6 || paddlePosP2 == 7 || paddlePosP2 == 8 || paddlePosP2 == 9 || paddlePosP2 == 10)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 9 && (paddlePosP2 == 7 || paddlePosP2 == 8 || paddlePosP2 == 9 || paddlePosP2 == 10 || paddlePosP2 == 11)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 10 && (paddlePosP2 == 8 || paddlePosP2 == 9 || paddlePosP2 == 10 || paddlePosP2 == 11 || paddlePosP2 == 12)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 11 && (paddlePosP2 == 9 || paddlePosP2 == 10 || paddlePosP2 == 11 || paddlePosP2 == 12 || paddlePosP2 == 13)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 12 && (paddlePosP2 == 10 || paddlePosP2 == 11 || paddlePosP2 == 12 || paddlePosP2 == 13 || paddlePosP2 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 13 && (paddlePosP2 == 11 || paddlePosP2 == 12 || paddlePosP2 == 13 || paddlePosP2 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 14 && (paddlePosP2 == 12 || paddlePosP2 == 13 || paddlePosP2 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 15 && (paddlePosP2 == 13 || paddlePosP2 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		// The ball has crossed the player's boundary

		else {

			pointsP1++;

			lcd.clear();

			lcd.setCursor(7, 0);

			lcd.print("P1 :");

			lcd.setCursor(7, 1);

			lcd.print("P2 :");

			// A point has been scored
			lcd.createChar(2, heart);
			lcd.setCursor(11, 1);

			for (i = 0; i < (3 - pointsP1); i++)
			{
				lcd.write(2);
			}
			lcd.setCursor(11, 0);
			for (i = 0; i < (3 - pointsP2); i++)
			{
				lcd.write(2);
			}


			delay(2000);

			lcd.clear();

			//Reset the ball's position and control variables for the next point

			ballPos[0] = 39;

			ballPos[1] = 7;

			totalDistance = distance = initialDist;

			Draw();

			// Determine a new game angle for this point

			startDir();


			// Game is over, 3 points have been scored by the Player 1, reset the LCD to display the Start Game message

			if (pointsP1 == 3) {

				gameState = false;



				// Display Game Over Message and prints Player 2 Victory
				lcd.clear();
				lcd.setCursor(0, 0);
				lcd.print("!!!GAME OVER!!!");
				delay(500);
				lcd.clear();
				lcd.setCursor(0, 0);
				lcd.print("    P2 WINS    ");
				lcd.setCursor(0, 1);
				lcd.print("    Hold key   ");
				PlayAnim();
				// Call setup to start the game over

				setup();

			}

		}

	}

	else if (newX == 75)  // Hit the player 1's boundary

	{

		P = 1;

		// Speed up the ball each time it hit's the player's paddle

		distance = (1.0 + difficultyPercent / 100.0) * distance;



		// Check to see if the Collision has happened of ball and paddle

		if (newY == 0 && (paddlePosP1 == 1 || paddlePosP1 == 2)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 1 && (paddlePosP1 == 1 || paddlePosP1 == 2 || paddlePosP1 == 3)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 2 && (paddlePosP1 == 1 || paddlePosP1 == 2 || paddlePosP1 == 3 || paddlePosP1 == 4)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 3 && (paddlePosP1 == 1 || paddlePosP1 == 2 || paddlePosP1 == 3 || paddlePosP1 == 4 || paddlePosP1 == 5)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 4 && (paddlePosP1 == 2 || paddlePosP1 == 3 || paddlePosP1 == 4 || paddlePosP1 == 5 || paddlePosP1 == 6)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 5 && (paddlePosP1 == 3 || paddlePosP1 == 4 || paddlePosP1 == 5 || paddlePosP1 == 6 || paddlePosP1 == 7)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 6 && (paddlePosP1 == 4 || paddlePosP1 == 5 || paddlePosP1 == 6 || paddlePosP1 == 7 || paddlePosP1 == 8)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 7 && (paddlePosP1 == 5 || paddlePosP1 == 6 || paddlePosP1 == 7 || paddlePosP1 == 8 || paddlePosP1 == 9)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 8 && (paddlePosP1 == 6 || paddlePosP1 == 7 || paddlePosP1 == 8 || paddlePosP1 == 9 || paddlePosP1 == 10)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 9 && (paddlePosP1 == 7 || paddlePosP1 == 8 || paddlePosP1 == 9 || paddlePosP1 == 10 || paddlePosP1 == 11)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 10 && (paddlePosP1 == 8 || paddlePosP1 == 9 || paddlePosP1 == 10 || paddlePosP1 == 11 || paddlePosP1 == 12)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 11 && (paddlePosP1 == 9 || paddlePosP1 == 10 || paddlePosP1 == 11 || paddlePosP1 == 12 || paddlePosP1 == 13)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 12 && (paddlePosP1 == 10 || paddlePosP1 == 11 || paddlePosP1 == 12 || paddlePosP1 == 13 || paddlePosP1 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 13 && (paddlePosP1 == 11 || paddlePosP1 == 12 || paddlePosP1 == 13 || paddlePosP1 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 14 && (paddlePosP1 == 12 || paddlePosP1 == 13 || paddlePosP1 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		else if (newY == 15 && (paddlePosP1 == 13 || paddlePosP1 == 14)) {

			CollisionUpdate(newX, newY, P);

		}

		// The ball has crossed the player's boundary

		else {

			pointsP2++;

			lcd.clear();

			lcd.setCursor(7, 0);

			lcd.print("P1 :");

			lcd.setCursor(7, 1);

			lcd.print("P2 :");

			// A point has been scored
			lcd.createChar(2, heart);
			lcd.setCursor(11, 1);

			for (i = 0; i < (3 - pointsP1); i++)
			{
				lcd.write(2);
			}
			lcd.setCursor(11, 0);
			for (i = 0; i < (3 - pointsP2); i++)
			{
				lcd.write(2);
			}

			delay(2000);

			lcd.clear();

			//Reset the ball's position and control variables for the next point

			ballPos[0] = 39;

			ballPos[1] = 7;

			totalDistance = distance = initialDist;

			Draw();

			// Determine a new game angle for this point

			startDir();


			// Game is over, 3 points have been scored by Player 2, reset the LCD to display the Start Game message

			if (pointsP2 == 3) {

				gameState = false;



				// Display Game Over Message and prints Player 2 Victory
				lcd.clear();
				lcd.setCursor(0, 0);
				lcd.print("!!!GAME OVER!!!");
				delay(500);
				lcd.clear();
				lcd.setCursor(0, 0);
				lcd.print("    P1 WINS    ");
				lcd.setCursor(0, 1);
				lcd.print("    Hold key   ");
				PlayAnim();

				// Call setup to start the game over

				setup();

			}

		}

	}



	// Check to make sure the Game is NOT over and then update the ball's LCD character

	if (gameState == true) {

		DrawBall(newX, newY);

	}

}



// Function to perform necessary updates/events when the ball hits the player's paddle

void CollisionUpdate(int X, int Y, int P) {

	leftRightDir = 1 * P;

	totalDistance = distance;

	ballPos[0] = X - P;

	ballPos[1] = Y;

}



// Function to determine which one of the 40 possible custom LCD characters should be drawn (and where) on the LCD

void DrawBall(int X, int Y) {

	int lcd_row;

	int lcd_col;



	// Determine which row of the LCD the ball's character is on

	if (Y <= 7) {

		lcd_row = 1;

	}

	else {

		lcd_row = 0;

	}



	//Determine which column of the LCD the ball's character is on

	if (X <= 4) {

		lcd_col = 0;

	}

	else if (X <= 9) {

		lcd_col = 1;

	}

	else if (X <= 14) {

		lcd_col = 2;

	}

	else if (X <= 19) {

		lcd_col = 3;

	}

	else if (X <= 24) {

		lcd_col = 4;

	}

	else if (X <= 29) {

		lcd_col = 5;

	}

	else if (X <= 34) {

		lcd_col = 6;

	}

	else if (X <= 39) {

		lcd_col = 7;

	}

	else if (X <= 44) {

		lcd_col = 8;

	}

	else if (X <= 49) {

		lcd_col = 9;

	}

	else if (X <= 54) {

		lcd_col = 10;

	}

	else if (X <= 59) {

		lcd_col = 11;

	}

	else if (X <= 64) {

		lcd_col = 12;

	}

	else if (X <= 69) {

		lcd_col = 13;

	}

	else if (X <= 74) {

		lcd_col = 14;

	}

	else {

		lcd_col = 15;

	}



	// Clear the LCD of the previous ball (the player's paddles)

	lcd.setCursor(1, 0);

	// 14 empty characters printed between the player's paddles

	lcd.print("              ");

	lcd.setCursor(1, 1);

	lcd.print("              ");



	// Determine the ball's position (single pixel) within a single LCD character

	int xpos = X - 5 * lcd_col;    // Column position in the (8*5) character

	int ypos;



	// Row position in the (8*5) character

	if (Y == 0 || Y == 8) {

		ypos = 0;

	}

	else if (Y == 1 || Y == 9) {

		ypos = 1;

	}

	else if (Y == 2 || Y == 10) {

		ypos = 2;

	}

	else if (Y == 3 || Y == 11) {

		ypos = 3;

	}

	else if (Y == 4 || Y == 12) {

		ypos = 4;

	}

	else if (Y == 5 || Y == 13) {

		ypos = 5;

	}

	else if (Y == 6 || Y == 14) {

		ypos = 6;

	}

	else if (Y == 7 || Y == 15) {

		ypos = 7;

	}



	// Select the custom LCD character, of the 40 possible Characters , and display it in it's correct LCD column and row position

	if (xpos == 0 && ypos == 0) {

		lcd.createChar(2, ball70);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 1 && ypos == 0) {

		lcd.createChar(2, ball71);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 2 && ypos == 0) {

		lcd.createChar(2, ball72);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 3 && ypos == 0) {

		lcd.createChar(2, ball73);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 4 && ypos == 0) {

		lcd.createChar(2, ball74);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}



	else if (xpos == 0 && ypos == 1) {

		lcd.createChar(3, ball60);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 1 && ypos == 1) {

		lcd.createChar(3, ball61);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 2 && ypos == 1) {

		lcd.createChar(3, ball62);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 3 && ypos == 1) {

		lcd.createChar(3, ball63);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 4 && ypos == 1) {

		lcd.createChar(3, ball64);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}



	else if (xpos == 0 && ypos == 2) {

		lcd.createChar(4, ball50);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 1 && ypos == 2) {

		lcd.createChar(4, ball51);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 2 && ypos == 2) {

		lcd.createChar(4, ball52);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 3 && ypos == 2) {

		lcd.createChar(4, ball53);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 4 && ypos == 2) {

		lcd.createChar(4, ball54);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}



	else if (xpos == 0 && ypos == 3) {

		lcd.createChar(5, ball40);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 1 && ypos == 3) {

		lcd.createChar(5, ball41);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 2 && ypos == 3) {

		lcd.createChar(5, ball42);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 3 && ypos == 3) {

		lcd.createChar(5, ball43);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 4 && ypos == 3) {

		lcd.createChar(5, ball44);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}



	else if (xpos == 0 && ypos == 4) {

		lcd.createChar(2, ball30);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 1 && ypos == 4) {

		lcd.createChar(2, ball31);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 2 && ypos == 4) {

		lcd.createChar(2, ball32);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 3 && ypos == 4) {

		lcd.createChar(2, ball33);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}

	else if (xpos == 4 && ypos == 4) {

		lcd.createChar(2, ball34);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(2);

	}



	else if (xpos == 0 && ypos == 5) {

		lcd.createChar(3, ball20);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 1 && ypos == 5) {

		lcd.createChar(3, ball21);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 2 && ypos == 5) {

		lcd.createChar(3, ball22);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 3 && ypos == 5) {

		lcd.createChar(3, ball23);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}

	else if (xpos == 4 && ypos == 5) {

		lcd.createChar(3, ball24);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(3);

	}



	else if (xpos == 0 && ypos == 6) {

		lcd.createChar(4, ball10);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 1 && ypos == 6) {

		lcd.createChar(4, ball11);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 2 && ypos == 6) {

		lcd.createChar(4, ball12);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 3 && ypos == 6) {

		lcd.createChar(4, ball13);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}

	else if (xpos == 4 && ypos == 6) {

		lcd.createChar(4, ball14);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(4);

	}



	else if (xpos == 0 && ypos == 7) {

		lcd.createChar(5, ball00);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 1 && ypos == 7) {

		lcd.createChar(5, ball01);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 2 && ypos == 7) {

		lcd.createChar(5, ball02);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 3 && ypos == 7) {

		lcd.createChar(5, ball03);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}

	else if (xpos == 4 && ypos == 7) {

		lcd.createChar(5, ball04);

		lcd.setCursor(lcd_col, lcd_row);

		lcd.write(5);

	}



}


void PlayAnim()
{
	int UPbtnP1 = LOW;
	int DOWNbtnP1 = LOW;
	int UPbtnP2 = LOW;
	int DOWNbtnP2 = LOW;

	//Custom characters for the Animation

	byte ball02a[8] = {
	  0b00100,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000
	};
	byte ball12a[8] = {
	  0b00000,
	  0b00100,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000
	};

	byte ball22a[8] = {
	  0b00000,
	  0b00000,
	  0b00100,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000
	};

	byte ball32a[8] = {
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00100,
	  0b00000,
	  0b00000,
	  0b00000,
	  0b00000
	};



	//Custom characters for the Animation
	byte fire_shooter[8] =
	{
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00100,
		0b01110,
		0b01110,
	};
	byte fire_shotA[8] =
	{
		0b00100,
		0b01010,
		0b00100,
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00000,
	};
	byte fire_shotB[8] =
	{
		0b01010,
		0b10001,
		0b10001,
		0b01010,
		0b00100,
		0b00000,
		0b00000,
		0b00000,
	};
	byte clearChar[8] =
	{
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00000,
		0b00000
	};

	while (!(UPbtnP1 == HIGH || UPbtnP2 == HIGH || DOWNbtnP1 == HIGH || DOWNbtnP2 == HIGH))
	{
		UPbtnP1 = digitalRead(buttonUPP1);
		DOWNbtnP1 = digitalRead(buttonDOWNP1);
		UPbtnP2 = digitalRead(buttonUPP2);
		DOWNbtnP2 = digitalRead(buttonDOWNP2);

		lcd.createChar(2, ball32);
		lcd.setCursor(1, 1);
		lcd.write(2);
		lcd.setCursor(14, 1);
		lcd.write(2);
		delay(80);
		lcd.createChar(2, ball22);
		lcd.setCursor(1, 1);
		lcd.write(2);
		lcd.setCursor(14, 1);
		lcd.write(2);
		delay(85);
		lcd.createChar(2, ball12);
		lcd.setCursor(1, 1);
		lcd.write(2);
		lcd.setCursor(14, 1);
		lcd.write(2);
		delay(90);
		lcd.createChar(2, ball02);
		lcd.setCursor(1, 1);
		lcd.write(2);
		lcd.setCursor(14, 1);
		lcd.write(2);
		delay(95);
		lcd.createChar(5, fire_shooter);
		lcd.setCursor(1, 1);
		lcd.write(5);
		lcd.setCursor(14, 1);
		lcd.write(5);

		lcd.createChar(2, ball72);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball62);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball52);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball42);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball32a);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball22a);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball12a);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);
		delay(100);
		lcd.createChar(2, ball02a);
		lcd.setCursor(1, 0);
		lcd.write(2);
		lcd.setCursor(14, 0);
		lcd.write(2);

		lcd.createChar(3, fire_shotA);
		lcd.setCursor(1, 0);
		lcd.write(3);
		lcd.setCursor(14, 0);
		lcd.write(3);
		delay(200);

		lcd.createChar(3, fire_shotB);
		lcd.setCursor(1, 0);
		lcd.write(3);
		lcd.setCursor(14, 0);
		lcd.write(3);
	}
}